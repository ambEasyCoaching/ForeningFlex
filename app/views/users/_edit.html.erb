<fieldset>
  <legend>Personlige oplysninger</legend>
  <div class="row-fluid">
    <div class="span6">
      <%= edit.text_field :first_name, :placeholder => "Fornavn" %>
      <%= edit.text_field :last_name, :placeholder => "Efternavn" %>
      <br>

      <%= edit.label :gender, :class => "radio inline" do %>
        <%= edit.radio_button :gender, true %>
        Mand
      <% end %>

      <%= edit.label :gender, :class => "radio inline" do %>
        <%= edit.radio_button :gender, false %>
        Kvinde
      <% end %>
      <br><br>

      <%= edit.label :birth_day, "Fødselsdato" %>
      <%= edit.date_select :birth_day, { :placeholder => "Fødselsdato", :start_year => 1900 }, { :class => "span4" } %>
    </div>
    <div class="span6">
      <%= image_tag @user.profile_picture.url(:thumb), :class => "img-polaroid pull-right" -%>
      <%= edit.label :profile_picture, "Profilbillede" %>
      <%= edit.file_field :profile_picture %>
    </div>
</fieldset>

<fieldset>
  <legend>Kontaktoplysninger</legend>
  
  <%= link_to '#', :class => "btn btn-small add_address" do %>
    <i class='icon-plus'></i> Tilføj ny adresse
  <% end %>
  <div class="clearfix"></div>
  <br>

  <%= edit.fields_for :addresses do |builder| %>
    <%= render "address_fields", :f => builder %>
  <% end %>
</fieldset>

<fieldset>
  <legend>Kontooplysninger</legend>
  <%= edit.label :login, "Brugernavn" %>
  <%= text_field_tag :login, @current_user.login, :disabled => true %>

  <%= edit.label :password, "Adgangskode" %>
  <%= edit.password_field :password, :placeholder => "Ny adgangskode" %>
    
  <%= edit.label :password_confirmation, "Bekræft" %>
  <%= edit.password_field :password_confirmation, :placeholder => "Bekræft den nye adgangskode" %>
</fieldset>

<% content_for :scripts do %>
  <script>
    function remove_address(link) {
      $(link).prev("input[type=hidden]").val("1");
      $(link).closest(".fields").slideUp();
    }
    $(".remove_address").click(function(e) {
      remove_address(this);
      e.preventDefault();
    });
  
    $(".add_address").click(function (e) {
      var content = "<%= add_fields_data(edit, :addresses).html_safe -%>";
      var new_id = new Date().getTime();
      var regexp = new RegExp("new_addresses", "g");

      $(this).parent().append(content.replace(regexp, new_id));
      $("#user_addresses_attributes_" + new_id + "__destroy").closest(".fields").hide().slideDown();

      
      $(".remove_address").click(function() {
        remove_address(this);
      });
      
      e.preventDefault();
    });
  </script>
<% end %>
